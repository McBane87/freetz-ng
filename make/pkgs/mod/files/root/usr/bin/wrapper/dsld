#!/bin/sh

# Redirect all output of this script and childs, called by exec, 
# to the given logfile
exec >> "/var/log/mod_net.log" 2>&1

daemon_mode=start
while [ $# -gt 0 ]; do
	[ "$1" == "-s" ] && daemon_mode="stop"
	[ "$1" == "-I" ] && daemon_mode="reload"
	shift
done

# Exec makes sure rc.dsld will not become a new process, 
# which would generate new PID and PPID. Instead it will override this process and inherit its PIDs.
exec /etc/init.d/rc.dsld $daemon_mode